// ========================================
// BTC SaaS Mixins 工具函数
// ========================================

@use "sass:color";
@use './variables.scss' as *;

// ========================================
// 布局 Mixins
// ========================================

// Flex 布局
@mixin flex($direction: row, $justify: flex-start, $align: stretch, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

// Flex 居中
@mixin flex-center {
  @include flex(row, center, center);
}

// Flex 垂直居中
@mixin flex-center-vertical {
  @include flex(row, flex-start, center);
}

// Flex 水平居中
@mixin flex-center-horizontal {
  @include flex(row, center, stretch);
}

// Flex 两端对齐
@mixin flex-between {
  @include flex(row, space-between, center);
}

// Flex 垂直布局
@mixin flex-column {
  @include flex(column, flex-start, stretch);
}

// Flex 垂直居中布局
@mixin flex-column-center {
  @include flex(column, center, center);
}

// ========================================
// 文本 Mixins
// ========================================

// 文本省略号
@mixin text-ellipsis($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

// 文本选择
@mixin text-select($select: text) {
  -webkit-user-select: $select;
  -moz-user-select: $select;
  -ms-user-select: $select;
  user-select: $select;
}

// 文本不可选择
@mixin text-no-select {
  @include text-select(none);
}

// ========================================
// 尺寸 Mixins
// ========================================

// 正方形
@mixin square($size) {
  width: $size;
  height: $size;
}

// 圆形
@mixin circle($size) {
  @include square($size);
  border-radius: 50%;
}

// 全屏
@mixin full-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
}

// 全宽高
@mixin full-size {
  width: 100%;
  height: 100%;
}

// ========================================
// 定位 Mixins
// ========================================

// 绝对定位居中
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// 固定定位居中
@mixin fixed-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// 绝对定位填充
@mixin absolute-fill {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

// ========================================
// 边框 Mixins
// ========================================

// 边框
@mixin border($width: 1px, $style: solid, $color: $border-color-base) {
  border: $width $style $color;
}

// 边框圆角
@mixin border-radius($radius: $border-radius-base) {
  border-radius: $radius;
}

// 边框阴影
@mixin box-shadow($shadow: $shadow-base) {
  box-shadow: $shadow;
}

// 无边框
@mixin no-border {
  border: none;
  outline: none;
}

// ========================================
// 背景 Mixins
// ========================================

// 渐变背景
@mixin gradient($direction: to right, $start-color: $primary-color, $end-color: $primary-light) {
  background: linear-gradient($direction, $start-color, $end-color);
}

// 背景图片
@mixin bg-image($url, $size: cover, $position: center, $repeat: no-repeat) {
  background-image: url($url);
  background-size: $size;
  background-position: $position;
  background-repeat: $repeat;
}

// ========================================
// 动画 Mixins
// ========================================

// 过渡动画
@mixin transition($properties: all, $duration: $transition-duration-base, $timing: $transition-timing-function) {
  transition: $properties $duration $timing;
}

// 悬停效果
@mixin hover($properties) {
  @include transition;
  
  &:hover {
    @each $property, $value in $properties {
      #{$property}: $value;
    }
  }
}

// 焦点效果
@mixin focus($properties) {
  &:focus {
    @each $property, $value in $properties {
      #{$property}: $value;
    }
  }
}

// 激活效果
@mixin active($properties) {
  &:active {
    @each $property, $value in $properties {
      #{$property}: $value;
    }
  }
}

// ========================================
// 滚动条 Mixins
// ========================================

// 自定义滚动条
@mixin custom-scrollbar($width: 10px, $track-color: $gray-100, $thumb-color: $gray-500) {
  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }
  
  &::-webkit-scrollbar-track {
    background: $track-color;
    border-radius: calc($width / 2);
  }
  
  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: calc($width / 2);
    border: 1px solid $gray-300;
    
    &:hover {
      background: color.adjust($thumb-color, $lightness: -10%);
    }
    
    &:active {
      background: color.adjust($thumb-color, $lightness: -20%);
    }
  }
}

// 隐藏滚动条
@mixin hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
  
  &::-webkit-scrollbar {
    display: none;
  }
}

// ========================================
// 响应式 Mixins
// ========================================

// 媒体查询
@mixin media-query($breakpoint) {
  @if $breakpoint == xs {
    @media (max-width: $breakpoint-xs - 1) { @content; }
  } @else if $breakpoint == sm {
    @media (min-width: $breakpoint-xs) and (max-width: $breakpoint-sm - 1) { @content; }
  } @else if $breakpoint == md {
    @media (min-width: $breakpoint-sm) and (max-width: $breakpoint-md - 1) { @content; }
  } @else if $breakpoint == lg {
    @media (min-width: $breakpoint-md) and (max-width: $breakpoint-lg - 1) { @content; }
  } @else if $breakpoint == xl {
    @media (min-width: $breakpoint-lg) { @content; }
  }
}

// 移动端
@mixin mobile {
  @media (max-width: $breakpoint-sm - 1) { @content; }
}

// 平板
@mixin tablet {
  @media (min-width: $breakpoint-sm) and (max-width: $breakpoint-md - 1) { @content; }
}

// 桌面端
@mixin desktop {
  @media (min-width: $breakpoint-md) { @content; }
}

// ========================================
// 工具 Mixins
// ========================================

// 清除浮动
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
}

// 不可见
@mixin invisible {
  visibility: hidden;
}

// 隐藏
@mixin hidden {
  display: none !important;
}

// 显示
@mixin visible {
  display: block !important;
}

// 内联显示
@mixin inline {
  display: inline !important;
}

// 内联块显示
@mixin inline-block {
  display: inline-block !important;
}

// 光标指针
@mixin cursor-pointer {
  cursor: pointer;
}

// 光标禁用
@mixin cursor-not-allowed {
  cursor: not-allowed;
}

// 禁用选择
@mixin disable-select {
  @include text-no-select;
  @include cursor-not-allowed;
}

// ========================================
// Element Plus 相关 Mixins
// ========================================

// 深度选择器
@mixin deep($selector) {
  :deep(#{$selector}) {
    @content;
  }
}

// Element Plus 组件样式覆盖
@mixin el-override($component, $styles) {
  .el-#{$component} {
    @each $property, $value in $styles {
      #{$property}: $value;
    }
  }
}

// ========================================
// 主题相关 Mixins
// ========================================

// 深色主题
@mixin dark-theme {
  html.dark & {
    @content;
  }
}

// 亮色主题
@mixin light-theme {
  html:not(.dark) & {
    @content;
  }
}

// 主题切换
@mixin theme-aware($light-value, $dark-value) {
  @include light-theme {
    @each $property, $value in $light-value {
      #{$property}: $value;
    }
  }
  
  @include dark-theme {
    @each $property, $value in $dark-value {
      #{$property}: $value;
    }
  }
}
