@use "sass:color";

// BTC Saas 主题样式 - 重构版
// 采用 cool-admin 的变量桥接方式，只改变量不动结构

// ========================================
// 业务 Token 层（独立于 Element Plus）
// ========================================

:root {
  // 业务色彩系统
  --bg-page: #f6f7f9;
  --bg-elevated: #ffffff;
  --bg-overlay: #ffffff;
  --bg-fill: #f0f2f5;
  --bg-fill-light: #f5f7fa;
  --bg-fill-dark: #ebedf0;
  
  // 文字色彩系统
  --text-1: #1f2328;
  --text-2: #636a73;
  --text-3: #8c959f;
  --text-4: #a3a6ad;
  
  // 品牌色彩系统
  --brand-6: #2f88ff;
  --brand-5: #409eff;
  --brand-4: #66b1ff;
  --brand-3: #85c5ff;
  --brand-2: #a3d8ff;
  --brand-1: #c2e7ff;
  
  // 功能色彩系统
  --success-6: #52c41a;
  --warning-6: #faad14;
  --error-6: #ff4d4f;
  --info-6: #1890ff;
  
  // 边框色彩系统
  --border-1: color-mix(in oklab, #000 12%, transparent);
  --border-2: color-mix(in oklab, #000 8%, transparent);
  --border-3: color-mix(in oklab, #000 4%, transparent);
  
  // 阴影系统
  --shadow-1: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
  --shadow-2: 0 1px 8px 0 rgba(0, 0, 0, 0.06);
  --shadow-3: 0 4px 16px 0 rgba(0, 0, 0, 0.08);
  
  // 让原生控件跟随主题
  color-scheme: light dark;
}

// 暗色主题业务 Token
html.dark {
  --bg-page: #0b0d10;
  --bg-elevated: #121418;
  --bg-overlay: #1d1e1f;
  --bg-fill: #1a1a1a;
  --bg-fill-light: #262727;
  --bg-fill-dark: #303030;
  
  --text-1: #e5eaf3;
  --text-2: #a3a6ad;
  --text-3: #8c959f;
  --text-4: #636a73;
  
  --brand-6: #409eff;
  --brand-5: #66b1ff;
  --brand-4: #85c5ff;
  --brand-3: #a3d8ff;
  --brand-2: #c2e7ff;
  --brand-1: #e1f6ff;
  
  --success-6: #67c23a;
  --warning-6: #e6a23c;
  --error-6: #f56c6c;
  --info-6: #909399;
  
  --border-1: color-mix(in oklab, #fff 18%, transparent);
  --border-2: color-mix(in oklab, #fff 12%, transparent);
  --border-3: color-mix(in oklab, #fff 6%, transparent);
  
  --shadow-1: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-2: 0 1px 8px 0 rgba(0, 0, 0, 0.4);
  --shadow-3: 0 4px 16px 0 rgba(0, 0, 0, 0.5);
}

// ========================================
// Element Plus 变量桥接层（关键桥）
// 只映射变量，不写结构选择器
// ========================================

:root {
  // 背景色桥接
  --el-bg-color: var(--bg-elevated);
  --el-bg-color-page: var(--bg-page);
  --el-bg-color-overlay: var(--bg-overlay);
  
  // 文字色桥接
  --el-text-color-primary: var(--text-1);
  --el-text-color-regular: var(--text-2);
  --el-text-color-secondary: var(--text-3);
  --el-text-color-placeholder: var(--text-4);
  
  // 边框色桥接
  --el-border-color: var(--border-1);
  --el-border-color-light: var(--border-2);
  --el-border-color-lighter: var(--border-3);
  --el-border-color-extra-light: var(--border-3);
  
  // 填充色桥接
  --el-fill-color-blank: var(--bg-elevated);
  --el-fill-color-light: var(--bg-fill-light);
  --el-fill-color: var(--bg-fill);
  --el-fill-color-dark: var(--bg-fill-dark);
  --el-fill-color-darker: var(--bg-fill-dark);
  
  // 品牌色桥接
  --el-color-primary: var(--brand-6);
  --el-color-primary-light-3: var(--brand-3);
  --el-color-primary-light-5: var(--brand-2);
  --el-color-primary-light-7: var(--brand-1);
  --el-color-primary-light-8: var(--brand-1);
  --el-color-primary-light-9: var(--brand-1);
  --el-color-primary-dark-2: var(--brand-5);
  
  // 功能色桥接
  --el-color-success: var(--success-6);
  --el-color-warning: var(--warning-6);
  --el-color-danger: var(--error-6);
  --el-color-info: var(--info-6);
  
  // 成功色变体
  --el-color-success-light-3: color-mix(in oklab, var(--success-6) 70%, white);
  --el-color-success-light-5: color-mix(in oklab, var(--success-6) 50%, white);
  --el-color-success-light-7: color-mix(in oklab, var(--success-6) 30%, white);
  --el-color-success-light-8: color-mix(in oklab, var(--success-6) 20%, white);
  --el-color-success-light-9: color-mix(in oklab, var(--success-6) 10%, white);
  
  // 警告色变体
  --el-color-warning-light-3: color-mix(in oklab, var(--warning-6) 70%, white);
  --el-color-warning-light-5: color-mix(in oklab, var(--warning-6) 50%, white);
  --el-color-warning-light-7: color-mix(in oklab, var(--warning-6) 30%, white);
  --el-color-warning-light-8: color-mix(in oklab, var(--warning-6) 20%, white);
  --el-color-warning-light-9: color-mix(in oklab, var(--warning-6) 10%, white);
  
  // 错误色变体
  --el-color-error-light-3: color-mix(in oklab, var(--error-6) 70%, white);
  --el-color-error-light-5: color-mix(in oklab, var(--error-6) 50%, white);
  --el-color-error-light-7: color-mix(in oklab, var(--error-6) 30%, white);
  --el-color-error-light-8: color-mix(in oklab, var(--error-6) 20%, white);
  --el-color-error-light-9: color-mix(in oklab, var(--error-6) 10%, white);
  
  // 信息色变体
  --el-color-info-light-3: color-mix(in oklab, var(--info-6) 70%, white);
  --el-color-info-light-5: color-mix(in oklab, var(--info-6) 50%, white);
  --el-color-info-light-7: color-mix(in oklab, var(--info-6) 30%, white);
  --el-color-info-light-8: color-mix(in oklab, var(--info-6) 20%, white);
  --el-color-info-light-9: color-mix(in oklab, var(--info-6) 10%, white);
}

// ========================================
// 应用层样式（只过渡颜色相关属性）
// ========================================

// 全局过渡：只过渡颜色，不要 all
html, body {
  transition: background-color 0.18s linear, color 0.18s linear;
}

// 应用容器过渡
.app, .themed-scope {
  transition: 
    background-color 0.18s linear,
    color 0.18s linear,
    border-color 0.18s linear;
}

// 侧边栏样式（只改颜色，不动结构）
.admin-layout {
  .sidebar,
  .el-aside {
    background: var(--bg-fill-light);
    transition: background-color 0.18s linear;
  }

  .logo {
    background: var(--brand-6);
    transition: background-color 0.18s linear;
  }

  .sidebar-menu {
    background: var(--bg-fill-light);
    
    :deep(.el-menu) {
      background: var(--bg-fill-light);
    }
    
    :deep(.el-menu-item) {
      color: var(--text-2);
      background: transparent;
      transition: color 0.18s linear, background-color 0.18s linear;
      
      &:hover {
        color: var(--brand-6);
        background: var(--bg-fill);
      }
      
      &.is-active {
        color: #ffffff;
        background: var(--brand-6);
      }
    }
  }
}

// 头部样式
.admin-layout .header {
  background: var(--bg-elevated);
  border-bottom-color: var(--border-2);
  transition: background-color 0.18s linear, border-color 0.18s linear;
}

.admin-layout .collapse-btn {
  color: var(--text-2);
  transition: color 0.18s linear;
  
  &:hover {
    background: var(--bg-fill-light);
    color: var(--brand-6);
  }
}

// 主内容区域
.admin-layout .main-content {
  background: var(--bg-page);
  transition: background-color 0.18s linear;
}

// 卡片样式
.el-card {
  background: var(--bg-elevated);
  border-color: var(--border-2);
  box-shadow: var(--shadow-1);
  transition: background-color 0.18s linear, border-color 0.18s linear, box-shadow 0.18s linear;
}

// 表格样式
.el-table {
  background: var(--bg-elevated);
  color: var(--text-1);
  
  :deep(.el-table__header-wrapper) {
    background: var(--bg-fill-light);
  }
  
  :deep(.el-table__body-wrapper) {
    background: var(--bg-elevated);
  }
  
  :deep(.el-table__row) {
    background: var(--bg-elevated);
    
    &:hover {
      background: var(--bg-fill-light);
    }
  }
}

// 按钮样式（只过渡颜色）
.el-button {
  transition: color 0.18s linear, background-color 0.18s linear, border-color 0.18s linear;
}

// 输入框样式
.el-input {
  :deep(.el-input__wrapper) {
    background: var(--bg-elevated);
    border-color: var(--border-1);
    transition: background-color 0.18s linear, border-color 0.18s linear;
  }
  
  :deep(.el-input__inner) {
    color: var(--text-1);
    transition: color 0.18s linear;
  }
}

// 下拉菜单样式
.el-dropdown-menu {
  background: var(--bg-overlay);
  border-color: var(--border-1);
  transition: background-color 0.18s linear, border-color 0.18s linear;
  
  :deep(.el-dropdown-menu__item) {
    color: var(--text-1);
    transition: color 0.18s linear, background-color 0.18s linear;
    
    &:hover {
      background: var(--bg-fill-light);
      color: var(--brand-6);
    }
  }
}

// 面包屑样式
.el-breadcrumb {
  :deep(.el-breadcrumb__item) {
    color: var(--text-2);
  }
  
  :deep(.el-breadcrumb__inner) {
    color: var(--text-2);
    transition: color 0.18s linear;
    
    &:hover {
      color: var(--brand-6);
    }
  }
}

// 标签页样式
.el-tabs {
  :deep(.el-tabs__header) {
    background: var(--bg-elevated);
    border-bottom-color: var(--border-1);
  }
  
  :deep(.el-tabs__item) {
    color: var(--text-2);
    transition: color 0.18s linear;
    
    &.is-active {
      color: var(--brand-6);
    }
  }
}

// 分页样式
.el-pagination {
  background: var(--bg-elevated);
  color: var(--text-1);
  
  :deep(.el-pager li) {
    background: var(--bg-elevated);
    color: var(--text-1);
    border-color: var(--border-1);
    transition: color 0.18s linear, background-color 0.18s linear, border-color 0.18s linear;
    
    &:hover {
      color: var(--brand-6);
    }
    
    &.is-active {
      background: var(--brand-6);
      color: #ffffff;
    }
  }
}

// 描述列表样式
.el-descriptions {
  background: var(--bg-elevated);
  
  :deep(.el-descriptions__header) {
    color: var(--text-1);
  }
  
  :deep(.el-descriptions__body) {
    background: var(--bg-elevated);
  }
  
  :deep(.el-descriptions__label) {
    background: var(--bg-fill-light);
    color: var(--text-1);
  }
  
  :deep(.el-descriptions__content) {
    background: var(--bg-elevated);
    color: var(--text-1);
  }
}

// 空状态样式
.el-empty {
  background: var(--bg-elevated);
  
  :deep(.el-empty__description) {
    color: var(--text-3);
  }
}

// 统计卡片样式
.stat-card {
  background: var(--bg-elevated);
  transition: background-color 0.18s linear;
}

.stat-number {
  color: var(--text-1);
  transition: color 0.18s linear;
}

.stat-label {
  color: var(--text-2);
  transition: color 0.18s linear;
}

// 插件卡片样式
.plugin-name {
  color: var(--text-1);
  transition: color 0.18s linear;
}

.plugin-description {
  color: var(--text-2);
  transition: color 0.18s linear;
}

// 页面标题样式
.page-header {
  h2 {
    color: var(--text-1);
    transition: color 0.18s linear;
  }
  
  p {
    color: var(--text-2);
    transition: color 0.18s linear;
  }
}

// 响应式设计
@media (max-width: 768px) {
  .admin-layout {
    .header {
      padding: 0 15px;
    }
    
    .main-content {
      padding: 15px;
    }
    
    .logo-text {
      font-size: 16px;
    }
  }
}
